https://lucidworks.com/post/understanding-transaction-logs-softcommit-and-commit-in-sorlcloud/


public override DataUri[] GetItemsInWorkflowState(WorkflowInfo info, CallContext context)
{
	string sql = "SELECT TOP ({2}maxVersionsToLoad{3}) {0}ItemId{1}, {0}Language{1}, {0}Version{1}\r\n          FROM {0}VersionedFields{1}\r\n          WHERE {0}FieldId{1}= {2}workflowStateFieldID{3} \r\n          AND {0}Value{1}= {2}workflowStateFieldValue{3}\r\n          ORDER BY {0}Updated{1} DESC";
	DataUri[] result;
	using (DataProviderReader dataProviderReader = this.Api.CreateReader(sql, new object[]
	{
		"maxVersionsToLoad",
		Settings.Workbox.SingleWorkflowStateVersionLoadThreshold,
		"workflowStateFieldID",
		FieldIDs.WorkflowState,
		"workflowStateFieldValue",
		info.StateID
	}))
	{
		ArrayList arrayList = new ArrayList();
		while (dataProviderReader.Read())
		{
			ID id = this.Api.GetId(0, dataProviderReader);
			Language language = this.Api.GetLanguage(1, dataProviderReader);
			Version version = this.Api.GetVersion(2, dataProviderReader);
			arrayList.Add(new DataUri(id, language, version));
		}
		result = (arrayList.ToArray(typeof(DataUri)) as DataUri[]);
	}
	return result;
}
